*** Settings ***
Documentation 	This test goes through every file in the corpus and sees if a conversion process occurred and if only the accepted errors were passed through and if the XML files matches JATS format.   

Library          	OperatingSystem
Library 		String
Library			XML
Library 		Collections
Library			Process

*** User Keywords ***
			

	
Text of Sample Body Found at Some Place in Convert
	[arguments]	${cXMLRegexPath}		${sXMLTextPath}
	${sXMLRawText}= 	Get File 	${sXMLTextPath}
	${sXMLRefinedText}= 	Replace String Using Regexp 	${sXMLRawText}		(<xref)(.*?)(/xref>)	${EMPTY}
	${sXMLText}= 	Parse XML 	${sXMLRefinedText}
	${sXMLPTexts}= 	Get Elements Texts 	${sXMLText}	body/p
	${cXMLTextRegex}=	Get File 	${cXMLRegexPath}
	:FOR	${text}		IN 	@{sXMLPTexts} 
	\	${noDashesText}=	Replace String 		${text}		â€”	\ 		 
	\ 	Create File 	spaced 		${noDashesText}
	\	Run Process		python spaceString.py spaced 		shell=True
	\	${spacedString}=	Get File	spaced
	\ 	Log Variables
	\	Should Match Regexp 		${cXMLTextRegex}	${spacedString}	

# Runs only when error file from xmllint test of meTypeset'd xml returns an error when checked against JATS Green DTD.
# Checks to make sure the only error is "Document ./testOutput/OpenMed-###-e###./nlm/out.xml: ### element xref: validity error IDREFS attribute 
# references an unknown ID "TO_LINK". 

Acceptable Errors Present
	[arguments]		${errors}
	${errorFile}= 	Get File 	${errors}
	${ret}= 		Should Match Regexp		${errorFile} 	(OpenMed-\\d*-e*\\d*?..docx/nlm/out.xml:\\d*: element xref: validity error : IDREFS attribute rid references an unknown ID "TO_LINK")?(Document OpenMed-\\d*-e*\\d*?..docx/nlm/out.xml does not validate against http://jats.nlm.nih.gov/archiving/1.1d3/JATS-archivearticle1.dtd)

# Checks to make sure that a converted file is present in the expected place. If there is an error present, a check is done to make sure that only
# expected errors are present. 

File is Converted and Errors Highlighted
	[arguments] 	${filePath}
	File Should Exist 	testOutput/${filePath}.docx/nlm/out.xml
	${status}	Run Keyword and Ignore Error 		File Should Be Empty         error/${filePath}.docx 
	Run Keyword If 		${status} != ('PASS', None)		Acceptable Errors Present 		  error/${filePath}.docx   
	Text of Sample Body Found at Some Place in Convert 	/var/local/meTypesetTests/tests/regexOutput/${filePath}.docx 		/var/local/meTypesetTests/testingDocuments/OpenMedXML/${filePath}.nxml			

*** Test Cases ***

OpenMed-01-e1   
	File is Converted and Errors Highlighted	OpenMed-01-e1  

OpenMed-01-e3
	File is Converted and Errors Highlighted	OpenMed-01-e3

OpenMed-01-e13
	File is Converted and Errors Highlighted	OpenMed-01-e13

OpenMed-01-e18
	File is Converted and Errors Highlighted	OpenMed-01-e18

OpenMed-01-e37
	File is Converted and Errors Highlighted	OpenMed-01-e37

OpenMed-01-e46
	File is Converted and Errors Highlighted	OpenMed-01-e46	

OpenMed-01-e52
	File is Converted and Errors Highlighted	OpenMed-01-e52

OpenMed-01-e55
	File is Converted and Errors Highlighted	OpenMed-01-e55

OpenMed-01-e58
	File is Converted and Errors Highlighted	OpenMed-01-e58

OpenMed-01-e74
	File is Converted and Errors Highlighted	OpenMed-01-e74

OpenMed-01-e89	
	File is Converted and Errors Highlighted	OpenMed-01-e89

OpenMed-01-e99
	File is Converted and Errors Highlighted	OpenMed-01-e99

OpenMed-01-e147
	File is Converted and Errors Highlighted	OpenMed-01-e147

OpenMed-01-e160
	File is Converted and Errors Highlighted	OpenMed-01-e160

OpenMed-01-e164 
	File is Converted and Errors Highlighted	OpenMed-01-e164

OpenMed-01-e166
	File is Converted and Errors Highlighted	OpenMed-01-e166

OpenMed-01-e181
	File is Converted and Errors Highlighted	OpenMed-01-e181




OpenMed-01-e184
	File is Converted and Errors Highlighted	OpenMed-01-e184

OpenMed-02-e1
	File is Converted and Errors Highlighted	OpenMed-02-e1

OpenMed-02-e4
	File is Converted and Errors Highlighted	OpenMed-02-e4

OpenMed-02-e18
	File is Converted and Errors Highlighted	OpenMed-02-e18

OpenMed-02-e20 
	File is Converted and Errors Highlighted	OpenMed-02-e20 

OpenMed-02-e39
	File is Converted and Errors Highlighted	OpenMed-02-e39

OpenMed-02-e42
	File is Converted and Errors Highlighted	OpenMed-02-e42

OpenMed-02-e49
	File is Converted and Errors Highlighted	OpenMed-02-e49

OpenMed-02-e51
	File is Converted and Errors Highlighted	OpenMed-02-e51

OpenMed-02-e60
	File is Converted and Errors Highlighted	OpenMed-02-e60

OpenMed-02-e62
	File is Converted and Errors Highlighted	OpenMed-02-e62

OpenMed-02-e70
	File is Converted and Errors Highlighted	OpenMed-02-e70

OpenMed-02-e74	
	File is Converted and Errors Highlighted	OpenMed-02-e74

OpenMed-02-e83
	File is Converted and Errors Highlighted	OpenMed-02-e83

OpenMed-02-e89
	File is Converted and Errors Highlighted	OpenMed-02-e89

OpenMed-02-e91
	File is Converted and Errors Highlighted	OpenMed-02-e91
	
OpenMed-02-e99
	File is Converted and Errors Highlighted	OpenMed-02-e99

OpenMed-02-e114
	File is Converted and Errors Highlighted	OpenMed-02-e114

OpenMed-02-e121	
	File is Converted and Errors Highlighted	OpenMed-02-e121	

OpenMed-03-e1
	File is Converted and Errors Highlighted	OpenMed-03-e1

OpenMed-03-e16
	File is Converted and Errors Highlighted	OpenMed-03-e16

OpenMed-03-e22
	File is Converted and Errors Highlighted	OpenMed-03-e22

OpenMed-03-e26	
	File is Converted and Errors Highlighted	OpenMed-03-e26	

OpenMed-03-e51
	File is Converted and Errors Highlighted	OpenMed-03-e51

OpenMed-03-e54
	File is Converted and Errors Highlighted	OpenMed-03-e54

OpenMed-03-e92 	
	File is Converted and Errors Highlighted	OpenMed-03-e92 

OpenMed-03-e101
	File is Converted and Errors Highlighted	OpenMed-03-e101

OpenMed-03-e120
	File is Converted and Errors Highlighted	OpenMed-03-e120

OpenMed-03-e121	
	File is Converted and Errors Highlighted	OpenMed-03-e121	

OpenMed-03-e122a 
	File is Converted and Errors Highlighted	OpenMed-03-e122a

OpenMed-03-e131 
	File is Converted and Errors Highlighted	OpenMed-03-e131

OpenMed-03-e140
	File is Converted and Errors Highlighted	OpenMed-03-e140

OpenMed-03-e165 
	File is Converted and Errors Highlighted	OpenMed-03-e165

OpenMed-03-e178
	File is Converted and Errors Highlighted	OpenMed-03-e178

OpenMed-03-e210
	File is Converted and Errors Highlighted	OpenMed-03-e210

OpenMed-03-e220	
	File is Converted and Errors Highlighted	OpenMed-03-e220

OpenMed-04-e1 
	File is Converted and Errors Highlighted	OpenMed-04-e1

OpenMed-04-e11
	File is Converted and Errors Highlighted	OpenMed-04-e11

OpenMed-04-e22
	File is Converted and Errors Highlighted	OpenMed-04-e22

OpenMed-04-e26
	File is Converted and Errors Highlighted	OpenMed-04-e26

OpenMed-04-e28
	File is Converted and Errors Highlighted	OpenMed-04-e28

OpenMed-04-e49
	File is Converted and Errors Highlighted	OpenMed-04-e49

OpenMed-04-e50	
	File is Converted and Errors Highlighted	OpenMed-04-e50	

OpenMed-04-e60
	File is Converted and Errors Highlighted	OpenMed-04-e60

OpenMed-04-e69 
	File is Converted and Errors Highlighted	OpenMed-04-e69 

OpenMed-04-e92	
	File is Converted and Errors Highlighted	OpenMed-04-e92	

OpenMed-04-e95
	File is Converted and Errors Highlighted	OpenMed-04-e95

OpenMed-04-e98
	File is Converted and Errors Highlighted	OpenMed-04-e98

OpenMed-04-e114
	File is Converted and Errors Highlighted	OpenMed-04-e114

OpenMed-04-e117 
	File is Converted and Errors Highlighted	OpenMed-04-e117

OpenMed-04-e139	
	File is Converted and Errors Highlighted	OpenMed-04-e139

OpenMed-04-e143 
	File is Converted and Errors Highlighted	OpenMed-04-e143

OpenMed-04-e167	
	File is Converted and Errors Highlighted	OpenMed-04-e167

OpenMed-04-e181
	File is Converted and Errors Highlighted	OpenMed-04-e181

OpenMed-04-e187 
	File is Converted and Errors Highlighted	OpenMed-04-e187

OpenMed-04-e193
	File is Converted and Errors Highlighted	OpenMed-04-e193

OpenMed-04-e197
	File is Converted and Errors Highlighted	OpenMed-04-e197

OpenMed-05-e1
	File is Converted and Errors Highlighted	OpenMed-05-e1

OpenMed-05-e10
	File is Converted and Errors Highlighted	OpenMed-05-e10

OpenMed-05-e13
	File is Converted and Errors Highlighted	OpenMed-05-e13

OpenMed-05-e23
	File is Converted and Errors Highlighted	OpenMed-05-e23

OpenMed-05-e28
	File is Converted and Errors Highlighted	OpenMed-05-e28

OpenMed-05-e33
	File is Converted and Errors Highlighted	OpenMed-05-e33

OpenMed-05-e49
	File is Converted and Errors Highlighted	OpenMed-05-e49

OpenMed-05-e55
	File is Converted and Errors Highlighted	OpenMed-05-e55

OpenMed-05-e57
	File is Converted and Errors Highlighted	OpenMed-05-e57

OpenMed-05-e65
	File is Converted and Errors Highlighted	OpenMed-05-e65

OpenMed-05-e77
	File is Converted and Errors Highlighted	OpenMed-05-e77

OpenMed-05-e79
	File is Converted and Errors Highlighted	OpenMed-05-e79

OpenMed-05-e87
	File is Converted and Errors Highlighted	OpenMed-05-e87

OpenMed-05-e94
	File is Converted and Errors Highlighted	OpenMed-05-e94

OpenMed-05-e104
	File is Converted and Errors Highlighted	OpenMed-05-e104

OpenMed-05-e120
	File is Converted and Errors Highlighted	OpenMed-05-e120

OpenMed-05-e132
	File is Converted and Errors Highlighted	OpenMed-05-e132

OpenMed-05-e134
	File is Converted and Errors Highlighted	OpenMed-05-e134

OpenMed-05-e137
	File is Converted and Errors Highlighted	OpenMed-05-e137

OpenMed-05-e139
	File is Converted and Errors Highlighted	OpenMed-05-e139

OpenMed-05-e149
	File is Converted and Errors Highlighted	OpenMed-05-e149

OpenMed-05-e166
	File is Converted and Errors Highlighted	OpenMed-05-e166

OpenMed-05-e173
	File is Converted and Errors Highlighted	OpenMed-05-e173

OpenMed-05-e175 
	File is Converted and Errors Highlighted	OpenMed-05-e175 

OpenMed-05-e183 
	File is Converted and Errors Highlighted	OpenMed-05-e183

OpenMed-05-e193 
	File is Converted and Errors Highlighted	OpenMed-05-e193 

OpenMed-05-e201
	File is Converted and Errors Highlighted	OpenMed-05-e201

OpenMed-06-e1
	File is Converted and Errors Highlighted	OpenMed-06-e1

OpenMed-06-e10
	File is Converted and Errors Highlighted	OpenMed-06-e10

OpenMed-06-e17
	File is Converted and Errors Highlighted	OpenMed-06-e17

OpenMed-06-e24
	File is Converted and Errors Highlighted	OpenMed-06-e24

OpenMed-06-e28 
	File is Converted and Errors Highlighted	OpenMed-06-e28 

OpenMed-06-e35
	File is Converted and Errors Highlighted	OpenMed-06-e35

OpenMed-06-e48
	File is Converted and Errors Highlighted	OpenMed-06-e48

OpenMed-06-e75
	File is Converted and Errors Highlighted	OpenMed-06-e75

OpenMed-06-e101
	File is Converted and Errors Highlighted	OpenMed-06-e101

OpenMed-06-e118  
	File is Converted and Errors Highlighted	OpenMed-06-e134

OpenMed-06-e141
	File is Converted and Errors Highlighted	OpenMed-06-e141

OpenMed-06-e146
	File is Converted and Errors Highlighted	OpenMed-06-e146

OpenMed-06-e166
	File is Converted and Errors Highlighted	OpenMed-06-e146

OpenMed-07-74 
	File is Converted and Errors Highlighted	OpenMed-07-74 
	
OpenMed-07-85
	File is Converted and Errors Highlighted	OpenMed-07-85

OpenMed-07-94
	File is Converted and Errors Highlighted	OpenMed-07-94

OpenMed-07-107
	File is Converted and Errors Highlighted	OpenMed-07-107

OpenMed-07-e1
	File is Converted and Errors Highlighted	OpenMed-07-e1

OpenMed-07-e9
	File is Converted and Errors Highlighted	OpenMed-07-e9

OpenMed-07-e21
	File is Converted and Errors Highlighted	OpenMed-07-e21

OpenMed-07-e31	
	File is Converted and Errors Highlighted	OpenMed-07-e31

OpenMed-07-e40
	File is Converted and Errors Highlighted	OpenMed-07-e40

OpenMed-07-e68
	File is Converted and Errors Highlighted	OpenMed-07-e68

OpenMed-08-01
	File is Converted and Errors Highlighted	OpenMed-08-01

OpenMed-08-14
	File is Converted and Errors Highlighted	OpenMed-08-14

OpenMed-08-20
	File is Converted and Errors Highlighted	OpenMed-08-20

OpenMed-08-46 
	File is Converted and Errors Highlighted	OpenMed-08-46

OpenMed-08-73
	File is Converted and Errors Highlighted	OpenMed-08-73

OpenMed-08-81 
	File is Converted and Errors Highlighted	OpenMed-08-81

OpenMed-08-102
	File is Converted and Errors Highlighted	OpenMed-08-102

OpenMed-08-105
	File is Converted and Errors Highlighted	OpenMed-08-105

OpenMed-08-116
	File is Converted and Errors Highlighted	OpenMed-08-116

OpenMed-08-130
	File is Converted and Errors Highlighted	OpenMed-08-130

OpenMed-08-147
	File is Converted and Errors Highlighted	OpenMed-08-147

OpenMed-01-e27   
	File is Converted and Errors Highlighted	OpenMed-01-e27  

OpenMed-01-e102
	File is Converted and Errors Highlighted	OpenMed-01-e102

OpenMed-01-e107
	File is Converted and Errors Highlighted	OpenMed-01-e107

OpenMed-01-e171
	File is Converted and Errors Highlighted	OpenMed-01-e171

OpenMed-02-e26
	File is Converted and Errors Highlighted	OpenMed-02-e26

OpenMed-03-e31
	File is Converted and Errors Highlighted	OpenMed-03-e31	

OpenMed-03-e62
	File is Converted and Errors Highlighted	OpenMed-03-e62

OpenMed-03-e69
	File is Converted and Errors Highlighted	OpenMed-03-e69

OpenMed-03-e123
	File is Converted and Errors Highlighted	OpenMed-03-e123

OpenMed-03-e196   
	File is Converted and Errors Highlighted	OpenMed-03-e196  

OpenMed-04-e13
	File is Converted and Errors Highlighted	OpenMed-04-e13

OpenMed-04-e102
	File is Converted and Errors Highlighted	OpenMed-04-e102

OpenMed-04-e134
	File is Converted and Errors Highlighted	OpenMed-04-e134

OpenMed-04-e154
	File is Converted and Errors Highlighted	OpenMed-04-e154

OpenMed-04-e171
	File is Converted and Errors Highlighted	OpenMed-04-e171	

OpenMed-05-e35
	File is Converted and Errors Highlighted	OpenMed-05-e35

OpenMed-05-e154
	File is Converted and Errors Highlighted	OpenMed-05-e154

OpenMed-06-e59
	File is Converted and Errors Highlighted	OpenMed-06-e59

OpenMed-08-e147
	File is Converted and Errors Highlighted	OpenMed-08-e147
